:root {
  --bg: #eef1ff;
  --text: #121420;
  --muted: #6b7280;
  --card: rgba(255, 255, 255, 0.66);
  --border: rgba(255, 255, 255, 0.45);
  --brand-a: #635bff;
  --brand-b: #5a4df6;
}
body.dark {
  --bg: #0d1021;
  --text: #f1f4ff;
  --muted: #aab1c5;
  --card: rgba(26, 31, 56, 0.72);
  --border: rgba(255, 255, 255, 0.12);
}
* { box-sizing: border-box; }
[hidden] { display: none !important; }
body { margin:0; font-family: Inter,sans-serif; color:var(--text); background: linear-gradient(145deg, var(--bg), #d8d4ff); min-height:100vh; display:grid; place-items:center; }
.bg-orb{position:fixed;border-radius:50%;filter:blur(60px);z-index:-1}
.orb-1{width:220px;height:220px;background:#7b68ff77;top:5%;left:8%}
.orb-2{width:260px;height:260px;background:#55d6ff55;bottom:5%;right:5%}
.glass{background:var(--card);border:1px solid var(--border);backdrop-filter:blur(12px);border-radius:20px}

button{border:1px solid rgba(77,65,242,.25);border-radius:10px;background:linear-gradient(135deg,#5e5bff,#4b4cf7);color:#fff;font-weight:600;box-shadow:0 4px 14px rgba(79,70,229,.25);padding:9px 12px;cursor:pointer}
button:hover{filter:brightness(1.03)}
.icon-btn,.nav-btn{background:transparent;color:var(--text);border:0;box-shadow:none}

.auth-gate{width:min(430px,92vw)}
.auth-card{padding:20px;display:flex;flex-direction:column;gap:12px}
.auth-form{display:flex;flex-direction:column;gap:10px}
.auth-form input,.auth-form button{border-radius:12px;border:1px solid var(--border);padding:12px;background:rgba(255,255,255,.45);color:var(--text)}
.show-password-container { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--muted); margin-top: -4px; margin-bottom: 4px; }
.show-password-container input { width: auto; padding: 0; margin: 0; }
.auth-toggle { text-align: center; font-size: 0.9rem; color: var(--muted); margin-top: 8px; }
.auth-toggle a { color: var(--brand-a); font-weight: 600; text-decoration: none; }
.auth-toggle a:hover { text-decoration: underline; }
#authMessage{min-height:16px;color:#d14343}

.app-shell{width:min(100%,480px);min-height:100vh;border-radius:0;padding:10px;border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.35),rgba(255,255,255,.15));display:flex;flex-direction:column}
.topbar{padding:12px;display:flex;justify-content:space-between;align-items:center}
.brand{display:flex;align-items:center;gap:12px}
.brand-logo{width:44px;height:44px;border-radius:14px;background:linear-gradient(135deg,var(--brand-a),var(--brand-b));display:grid;place-items:center;color:#fff}
.brand h1{margin:0;font-size:1.8rem}
.top-actions{display:flex;gap:6px;align-items:center}

.app-layout{display:grid;grid-template-rows:1fr auto;height:calc(100vh - 86px)}
main{padding:8px 2px 10px;overflow:auto}
.web-sidepanel{display:none;padding:14px}
.screen{display:none}.screen.active{display:block}

.search-row{display:flex;gap:10px;align-items:center;padding:12px 14px;margin-bottom:14px}
.search-row input{border:0;background:transparent;flex:1;color:var(--text)}
.stories{display:flex;gap:12px;overflow:auto;padding:12px;margin-bottom:14px;min-height:92px}
.story{text-align:center;min-width:74px;cursor:pointer}
.avatar{width:62px;height:62px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,#fff,#dbe3ff);border:2px solid #fff;margin:0 auto 6px;font-weight:700}

.feed-list{display:grid;gap:12px}
.feed-card{padding:12px}
.feed-type{font-size:.72rem;color:var(--muted);margin-bottom:6px}

/* Strict preview aspect ratio rules */
.media-16x9,.media-9x16,.suite-preview,.post-viewer-media{position:relative;overflow:hidden;border-radius:14px;background:#0f172a}
.media-16x9{aspect-ratio:16/9}
.media-9x16{aspect-ratio:9/16;max-height:70vh}
.media-16x9 img,.media-16x9 video,.media-9x16 img,.media-9x16 video,.suite-preview img,.suite-preview video,.post-viewer-media img,.post-viewer-media video{width:100%;height:100%;object-fit:cover;display:block}
.carousel-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px}
.carousel-row .media-9x16{max-height:unset}

.upload-type-row{display:flex;gap:8px;padding:10px;margin-bottom:10px;overflow:auto}
.type-btn{border-radius:999px;background:rgba(99,91,255,.12);color:var(--text);white-space:nowrap;box-shadow:none}
.type-btn.active{background:linear-gradient(135deg,var(--brand-a),var(--brand-b));color:#fff}
.upload-form{padding:12px;display:grid;gap:10px;margin-bottom:10px}
.upload-form input,.upload-form textarea{border-radius:12px;border:1px solid var(--border);padding:12px;background:rgba(255,255,255,.45);color:var(--text)}
.upload-form textarea{min-height:90px;resize:vertical}
.upload-dropzone{border:2px dashed rgba(100,116,139,.35);border-radius:14px;min-height:150px;display:grid;place-items:center;text-align:center;padding:14px;cursor:pointer;background:rgba(255,255,255,.35)}
.upload-dropzone.dragover{border-color:#5b5ee8;background:rgba(99,91,255,.13)}
.drop-icon{font-size:1.5rem}
.upload-selected-preview{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px}
.selected-item{border:1px solid var(--border);border-radius:12px;padding:8px;background:rgba(255,255,255,.4);font-size:.8rem}
.selected-item .media-16x9,.selected-item .media-9x16{margin-bottom:6px}
.upload-btn-row{display:flex;justify-content:flex-end;gap:8px;flex-wrap:wrap}
#clearUploadSelection,#confirmCancel{background:rgba(255,255,255,.8);color:#1f2937;box-shadow:none}
#publishUploadBtn,#saveCreativeSuite,#confirmOk{background:linear-gradient(135deg,#5e5bff,#4b4cf7)}
.status-text{margin:0 2px 8px;color:var(--muted);font-size:.9rem}
.upload-progress{height:10px;border-radius:999px;overflow:hidden;background:rgba(99,91,255,.15);margin:0 2px 8px}
#uploadProgressBar{width:0;height:100%;background:linear-gradient(135deg,var(--brand-a),var(--brand-b));transition:width .18s linear}
.upload-list{display:grid;gap:8px}.upload-item{padding:10px;border-radius:14px}

.channel-content-list{display:grid;gap:10px}.channel-card{padding:12px}.channel-actions{display:grid;gap:8px}.channel-actions input,.channel-actions textarea{border-radius:10px;border:1px solid var(--border);padding:8px;background:rgba(255,255,255,.42);color:var(--text)}

.chat-layout{display:grid;grid-template-columns:1fr;min-height:62vh;overflow:hidden}
.chat-list{border-bottom:1px solid var(--border);padding:12px}
.chat-user{width:100%;text-align:left;margin-bottom:8px;background:transparent;color:var(--text);display:block;border:0;border-radius:12px;padding:8px;box-shadow:none}
.chat-user.active{background:rgba(99,91,255,.2)}
.chat-panel{padding:12px;display:flex;flex-direction:column;min-height:46vh}
.chat-header{display:flex;justify-content:space-between;align-items:center;position:relative}
.menu-wrap{position:relative}.chat-menu{position:absolute;right:0;top:36px;width:180px;background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;z-index:10}.chat-menu button{width:100%;text-align:left;border:0;padding:9px 10px;background:transparent;color:var(--text);box-shadow:none}
.chat-menu .danger{color:#d14343}
.messages{flex:1;overflow:auto;display:flex;flex-direction:column;gap:6px;margin:10px 0;padding:0 4px}
.bubble{max-width:82%;padding:8px 12px;border-radius:16px;line-height:1.4;word-break:break-word;position:relative;font-size:0.95rem;box-shadow:0 1px 2px rgba(0,0,0,0.1)}
.incoming{align-self:flex-start;background:var(--card);border-bottom-left-radius:4px;color:var(--text)}
.outgoing{align-self:flex-end;background:linear-gradient(135deg,var(--brand-a),var(--brand-b));border-bottom-right-radius:4px;color:#fff}
.attachment-preview{border:1px dashed var(--border);border-radius:14px;padding:8px;margin:0 0 8px;font-size:.9rem}
.composer{display:flex;gap:8px;align-items:center}.composer input[type='text']{flex:1;border:1px solid var(--border);border-radius:999px;padding:10px 14px;background:transparent;color:var(--text)}#fileInput{display:none}.attach-btn{width:38px;height:38px;border-radius:50%;display:grid;place-items:center;background:rgba(99,91,255,.2);cursor:pointer}

.bottom-nav{display:grid;grid-template-columns:repeat(5,1fr);padding:10px 4px;gap:2px;margin-top:6px}
.nav-btn{display:grid;place-items:center;font-size:1.1rem;gap:2px}.nav-btn span{font-size:.8rem}

.story-viewer{position:fixed;inset:0;background:rgba(15,18,34,.68);display:grid;place-items:center;z-index:50}.story-viewer-card{width:min(460px,95vw);padding:12px}.story-viewer-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.story-viewer-actions{display:flex;justify-content:space-between;margin-top:8px}

.modal{position:fixed;inset:0;background:rgba(9,11,22,.72);display:grid;place-items:center;z-index:60}
.modal-card{width:min(980px,95vw);max-height:92vh;overflow:auto;padding:12px}
.modal-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.suite-grid{display:grid;grid-template-columns:220px 1fr;gap:10px}
.suite-asset-list{display:grid;gap:8px;max-height:66vh;overflow:auto}
.suite-asset-item{padding:8px;border-radius:10px;background:rgba(99,91,255,.12);cursor:pointer}
.suite-asset-item.active{background:linear-gradient(135deg,var(--brand-a),var(--brand-b));color:#fff}
.suite-preview{aspect-ratio:16/9;display:grid;place-items:center}
.overlay-text{position:absolute;left:10%;top:10%;font-weight:700;cursor:grab;text-shadow:0 2px 8px rgba(0,0,0,.5)}
.suite-controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:8px;margin-top:8px}
.suite-controls label{display:grid;gap:4px;font-size:.85rem}
.suite-controls input{border-radius:8px;border:1px solid var(--border);padding:8px;background:rgba(255,255,255,.45);color:var(--text)}
.post-viewer-card{max-width:1024px}.post-interaction{display:grid;gap:8px}.comment-list{display:grid;gap:6px;max-height:200px;overflow:auto}.comment-item{padding:6px 8px;border-radius:10px;background:rgba(99,91,255,.08)}.interaction-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

@media (min-width:1024px){
  .app-shell{width:min(1220px,96vw);min-height:90vh;max-height:95vh;border-radius:24px;padding:14px}
  .app-layout{grid-template-columns:92px 1fr 280px;grid-template-rows:1fr;gap:12px;height:calc(90vh - 90px)}
  .bottom-nav{grid-template-columns:1fr;align-content:start;gap:10px;padding:10px}
  .nav-btn{background:rgba(255,255,255,.2);border-radius:14px;padding:10px 6px}
  main{padding:6px;border-radius:20px;border:1px solid var(--border);background:var(--card)}
  .web-sidepanel{display:block}
  .chat-layout{grid-template-columns:260px 1fr;min-height:72vh}
  .chat-list{border-right:1px solid var(--border);border-bottom:0}
}

.explore-users-list {
  display: grid;
  gap: 10px;
}

.explore-user-card {
  padding: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

.explore-user-head {
  display: flex;
  align-items: center;
  gap: 10px;
}

.explore-user-head p {
  margin: 2px 0 0;
  color: var(--muted);
  font-size: 0.85rem;
}

.status-pill {
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 0.75rem;
  font-weight: 700;
}

.status-pill.active {
  background: rgba(16, 185, 129, 0.2);
  color: #0f8a3a;
}

.status-pill.inactive {
  background: rgba(148, 163, 184, 0.2);
  color: #64748b;
}

.chat-list-actions { display: grid; gap: 8px; }
.typing-indicator { color: var(--muted); min-height: 16px; font-size: 0.78rem; }
.view-once-toggle { display: inline-flex; align-items: center; gap: 4px; font-size: 0.78rem; color: var(--muted); }

.chat-image {
  max-width: 220px;
  border-radius: 10px;
  overflow: hidden;
  aspect-ratio: 9 / 16;
}
.chat-image.landscape { aspect-ratio: 16 / 9; }
.chat-image img { width: 100%; height: 100%; object-fit: cover; display: block; }
.view-once-badge { font-size: 0.72rem; opacity: 0.9; }
.view-once-placeholder { font-size: 0.85rem; opacity: 0.9; }

.contact-list { display: grid; gap: 8px; max-height: 55vh; overflow: auto; margin-top: 10px; }
.contact-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px;
  background: rgba(255,255,255,0.35);
}
